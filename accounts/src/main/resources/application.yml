spring:
  application:
    name: accounts
  profiles:
    active: dev
  config:
    import: optional:configserver:http://host.docker.internal:8888
  data:
    mongodb:
      host: host.docker.internal
      port: 27017

server:
  port: 8081
  address: 0.0.0.0

eureka:
  client:
    serviceUrl:
      defaultZone: http://host.docker.internal:8761/eureka/
    register-with-eureka: true
    fetch-registry: true
  instance:
    preferIpAddress: true

# Structured JSON Logging Configuration
logging:
  level:
    com.example.accounts: DEBUG
    org.springframework.web: INFO
    org.springframework.security: WARN
    org.mongodb: WARN
  pattern:
    # JSON format for structured logging
    console: >-
      {
        "timestamp": "%d{yyyy-MM-dd'T'HH:mm:ss.SSSXXX}",
        "level": "%level",
        "thread": "%thread",
        "logger": "%logger{36}",
        "message": "%message",
        "traceId": "%X{traceId:-}",
        "spanId": "%X{spanId:-}",
        "service": "accounts",
        "host": "${HOSTNAME:-localhost}"
      }%n

management:
  endpoints:
    web:
      exposure:
        include: health,info,prometheus
  endpoint:
    health:
      probes:
        enabled: true
      show-details: never
  health:
    readiness:
      enabled: true
    liveness:
      enabled: true
  # Enable tracing correlation for logs
  tracing:
    sampling:
      probability: 1.0
